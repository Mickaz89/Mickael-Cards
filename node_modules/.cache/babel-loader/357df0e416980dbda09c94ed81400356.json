{"ast":null,"code":"import _slicedToArray from\"/Users/mickaelzana/Desktop/backstage/cards/demo-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Popover,Button}from'antd';import SelectUI from'./SelectOrCreate';import CardUI from'./CardUI';import{jsx as _jsx}from\"react/jsx-runtime\";var PopoverUI=function PopoverUI(_ref){var children=_ref.children,reload=_ref.reload,selected=_ref.selected,reloadModal=_ref.reloadModal;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),categories=_useState2[0],setCategories=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),newCategory=_useState4[0],setNewCategory=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),visible=_useState6[0],setVisible=_useState6[1];useEffect(function(){fetch('https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/categories').then(function(response){return response.json();}).then(function(data){setCategories(data);});// console.log(count)\n},[]);// if you add count, only run if count changes.\nvar onSubmitTag=function onSubmitTag(value){fetch(\"https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/transactions/\".concat(selected.transaction_details.uuid),{method:'PUT',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({\"category\":value})}).then(function(response){return response.json();}).then(function(data){reload();// closeModal()\nsetVisible(false);reloadModal(value);});};var _onSelect=function onSelect(value){console.log('value ',value);onSubmitTag(value);};var text=/*#__PURE__*/_jsx(\"span\",{children:\"Title\"});var content=/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CardUI,{title:\"Edit Category\",onSelect:function onSelect(v){return _onSelect(v);}})});var buttonWidth=70;return/*#__PURE__*/_jsx(Popover,{visible:visible,placement:\"right\",content:content,trigger:\"click\",children:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return setVisible(true);},children:children})});};export default PopoverUI;","map":{"version":3,"sources":["/Users/mickaelzana/Desktop/backstage/cards/demo-front/src/components/PopoverUI.js"],"names":["React","useState","useEffect","Popover","Button","SelectUI","CardUI","PopoverUI","children","reload","selected","reloadModal","categories","setCategories","newCategory","setNewCategory","visible","setVisible","fetch","then","response","json","data","onSubmitTag","value","transaction_details","uuid","method","headers","body","JSON","stringify","onSelect","console","log","text","content","v","buttonWidth"],"mappings":"4KAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,OAAT,CAAkBC,MAAlB,KAAgC,MAAhC,CACA,MAAOC,CAAAA,QAAP,KAAqB,kBAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,C,2CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAA+C,IAA7CC,CAAAA,QAA6C,MAA7CA,QAA6C,CAAnCC,MAAmC,MAAnCA,MAAmC,CAA3BC,QAA2B,MAA3BA,QAA2B,CAAjBC,WAAiB,MAAjBA,WAAiB,CAE/D,cAAoCV,QAAQ,CAAC,EAAD,CAA5C,wCAAOW,UAAP,eAAmBC,aAAnB,eACA,eAAsCZ,QAAQ,CAAC,IAAD,CAA9C,yCAAOa,WAAP,eAAoBC,cAApB,eACA,eAA8Bd,QAAQ,CAAC,KAAD,CAAtC,yCAAOe,OAAP,eAAgBC,UAAhB,eAGAf,SAAS,CAAC,UAAM,CACdgB,KAAK,CAAC,uEAAD,CAAL,CACGC,IADH,CACQ,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EADhB,EAEGF,IAFH,CAEQ,SAAAG,IAAI,CAAI,CAAET,aAAa,CAACS,IAAD,CAAb,CAAqB,CAFvC,EAIA;AACD,CANQ,CAMN,EANM,CAAT,CAMO;AAEP,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAC7BN,KAAK,mFAA4ER,QAAQ,CAACe,mBAAT,CAA6BC,IAAzG,EAAiH,CACpHC,MAAM,CAAE,KAD4G,CAEpHC,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,eAAgB,kBAFT,CAF2G,CAMpHC,IAAI,CAACC,IAAI,CAACC,SAAL,CAAe,CAAC,WAAWP,KAAZ,CAAf,CAN+G,CAAjH,CAAL,CAQCL,IARD,CAQM,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EARd,EASCF,IATD,CASM,SAAAG,IAAI,CAAI,CACZb,MAAM,GACN;AACAQ,UAAU,CAAC,KAAD,CAAV,CACAN,WAAW,CAACa,KAAD,CAAX,CAED,CAfD,EAgBD,CAjBD,CAmBA,GAAMQ,CAAAA,SAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACR,KAAD,CAAW,CACxBS,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBV,KAAtB,EACAD,WAAW,CAACC,KAAD,CAAX,CACH,CAHD,CAKE,GAAMW,CAAAA,IAAI,cAAG,+BAAb,CACA,GAAMC,CAAAA,OAAO,cACb,kCACG,KAAC,MAAD,EAAQ,KAAK,CAAE,eAAf,CAAgC,QAAQ,CAAE,kBAACC,CAAD,QAAOL,CAAAA,SAAQ,CAACK,CAAD,CAAf,EAA1C,EADH,EADA,CAQA,GAAMC,CAAAA,WAAW,CAAG,EAApB,CAEA,mBACI,KAAC,OAAD,EAAS,OAAO,CAAEtB,OAAlB,CAA2B,SAAS,CAAC,OAArC,CAA6C,OAAO,CAAEoB,OAAtD,CAA+D,OAAO,CAAC,OAAvE,uBACI,UAAG,OAAO,CAAE,yBAAMnB,CAAAA,UAAU,CAAC,IAAD,CAAhB,EAAZ,UAAqCT,QAArC,EADJ,EADJ,CAMH,CAxDD,CA0DA,cAAeD,CAAAA,SAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Popover, Button } from 'antd';\nimport SelectUI from './SelectOrCreate';\nimport CardUI from './CardUI';\n\nconst PopoverUI = ({children ,reload, selected, reloadModal}) => {\n\n  const [categories, setCategories] = useState([])\n  const [newCategory, setNewCategory] = useState(null)\n  const [visible, setVisible] = useState(false)\n\n\n  useEffect(() => {\n    fetch('https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/categories')\n      .then(response => response.json())\n      .then(data => { setCategories(data) });\n\n    // console.log(count)\n  }, []) // if you add count, only run if count changes.\n\n  const onSubmitTag = (value) => {\n    fetch(`https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/transactions/${selected.transaction_details.uuid}`, {\n      method: 'PUT',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body:JSON.stringify({\"category\":value})\n    })\n    .then(response => response.json())\n    .then(data => { \n      reload() \n      // closeModal()\n      setVisible(false)\n      reloadModal(value);\n      \n    });\n  }\n\n  const onSelect = (value) => {\n      console.log('value ', value)\n      onSubmitTag(value)\n  }\n\n    const text = <span>Title</span>;\n    const content = (\n    <div>\n       <CardUI title={\"Edit Category\"} onSelect={(v) => onSelect(v)} >\n           \n       </CardUI>\n    </div>\n    );\n\n    const buttonWidth = 70;\n\n    return(\n        <Popover visible={visible} placement=\"right\" content={content} trigger=\"click\">\n            <a onClick={() => setVisible(true)}>{children}</a>\n        </Popover>\n        \n    );\n}\n\nexport default PopoverUI"]},"metadata":{},"sourceType":"module"}