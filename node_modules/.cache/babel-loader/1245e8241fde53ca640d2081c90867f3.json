{"ast":null,"code":"var _jsxFileName = \"/Users/mickaelzana/Desktop/backstage/cards/demo-front/src/components/SelectOrCreate.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchUserCategories, createTransactionCategory } from '../actions';\nimport CreatableSelect from 'react-select/creatable';\nimport { Button, Select } from 'antd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Option\n} = Select;\n\nconst SelectOrCreate = ({\n  loading,\n  fetchUserCategories,\n  createTransactionCategory,\n  categories,\n  select\n}) => {\n  _s();\n\n  // const [value, setValue] = useState(\"\")\n  useEffect(() => {\n    fetchUserCategories();\n  }, []);\n  let selectorOptions = categories.map(c => {\n    return {\n      label: c.name,\n      value: c.name\n    };\n  });\n\n  const onCreate = value => {\n    console.log('create ', value);\n\n    if (value != \"\") {\n      console.log('create');\n      createTransactionCategory(value);\n    }\n  };\n\n  const defaultValue = () => {\n    console.log(select && select.transaction_details.category.trim());\n    console.log(selectorOptions);\n    const found = selectorOptions.filter(o => o.value.trim() === select && select.transaction_details.category.trim());\n    console.log(' default ', found); // console.log(' default ', selectorOptions[1].value)\n    // if(select.transaction_details.category.trim() == selectorOptions[1].value.trim()){\n    //   console.log('true true')\n    // }\n\n    return selectorOptions.find(o => o.value.trim() === select && select.transaction_details.category.trim());\n  }; // const onSubmitTag = (value) => {\n  //   setValue(value.value)\n  //   console.log('VALUE VALUE ', value)\n  //   // fetch(`https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/transactions/${selectedItem.transaction_details.uuid}`, {\n  //   //   method: 'PUT',\n  //   //   headers: {\n  //   //     'Accept': 'application/json',\n  //   //     'Content-Type': 'application/json'\n  //   //   },\n  //   //   body:JSON.stringify({\"category\":value})\n  //   // })\n  //   // .then(response => response.json())\n  //   // .then(data => { \n  //   //   reload() \n  //   //   closeModal()\n  //   //   setValue('')\n  //   //   // setVisible(false)\n  //   //   // reloadModal(value);\n  //   // });\n  // }\n\n\n  return !categories.length ? /*#__PURE__*/_jsxDEV(\"h2\", {\n    children: \"Loading\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 3\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(CreatableSelect // onChange={onSubmitTag}\n    , {\n      value: defaultValue(),\n      options: selectorOptions,\n      className: \"select\",\n      onCreateOption: onCreate,\n      isLoading: loading,\n      isDisabled: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 3\n  }, this);\n};\n\n_s(SelectOrCreate, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = SelectOrCreate;\n\nconst mapStateToProps = state => {\n  return {\n    categories: state.categories.categories,\n    loading: state.categories.loading,\n    select: state.select\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchUserCategories: () => dispatch(fetchUserCategories()),\n    createTransactionCategory: category => dispatch(createTransactionCategory(category))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectOrCreate);\n\nvar _c;\n\n$RefreshReg$(_c, \"SelectOrCreate\");","map":{"version":3,"sources":["/Users/mickaelzana/Desktop/backstage/cards/demo-front/src/components/SelectOrCreate.js"],"names":["React","useState","useEffect","connect","fetchUserCategories","createTransactionCategory","CreatableSelect","Button","Select","Option","SelectOrCreate","loading","categories","select","selectorOptions","map","c","label","name","value","onCreate","console","log","defaultValue","transaction_details","category","trim","found","filter","o","find","length","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,mBAAT,EAA8BC,yBAA9B,QAA+D,YAA/D;AACA,OAAOC,eAAP,MAA4B,wBAA5B;AACA,SAASC,MAAT,EAAiBC,MAAjB,QAA+B,MAA/B;;AAEA,MAAM;AAAEC,EAAAA;AAAF,IAAaD,MAAnB;;AAEA,MAAME,cAAc,GAAG,CAAC;AAACC,EAAAA,OAAD;AAAUP,EAAAA,mBAAV;AAA+BC,EAAAA,yBAA/B;AAA0DO,EAAAA,UAA1D;AAAsEC,EAAAA;AAAtE,CAAD,KAAoF;AAAA;;AAEzG;AAEAX,EAAAA,SAAS,CAAC,MAAM;AACdE,IAAAA,mBAAmB;AACpB,GAFQ,EAEN,EAFM,CAAT;AAKA,MAAIU,eAAe,GAAGF,UAAU,CAACG,GAAX,CAAgBC,CAAC,IAAI;AACzC,WAAO;AACLC,MAAAA,KAAK,EAACD,CAAC,CAACE,IADH;AAELC,MAAAA,KAAK,EAACH,CAAC,CAACE;AAFH,KAAP;AAID,GALqB,CAAtB;;AAQA,QAAME,QAAQ,GAAID,KAAD,IAAW;AAC1BE,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBH,KAAvB;;AACA,QAAIA,KAAK,IAAI,EAAb,EAAiB;AACfE,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAjB,MAAAA,yBAAyB,CAACc,KAAD,CAAzB;AACD;AACJ,GANC;;AAQF,QAAMI,YAAY,GAAG,MAAM;AACzBF,IAAAA,OAAO,CAACC,GAAR,CAAYT,MAAM,IAAIA,MAAM,CAACW,mBAAP,CAA2BC,QAA3B,CAAoCC,IAApC,EAAtB;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAaR,eAAb;AACA,UAAMa,KAAK,GAAGb,eAAe,CAACc,MAAhB,CAAwBC,CAAC,IAAIA,CAAC,CAACV,KAAF,CAAQO,IAAR,OAAmBb,MAAnB,IAA6BA,MAAM,CAACW,mBAAP,CAA2BC,QAA3B,CAAoCC,IAApC,EAA1D,CAAd;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBK,KAAzB,EAJyB,CAKzB;AACA;AACA;AACA;;AACA,WAAOb,eAAe,CAACgB,IAAhB,CAAsBD,CAAC,IAAIA,CAAC,CAACV,KAAF,CAAQO,IAAR,OAAmBb,MAAnB,IAA6BA,MAAM,CAACW,mBAAP,CAA2BC,QAA3B,CAAoCC,IAApC,EAAxD,CAAP;AACD,GAVD,CAzB2G,CAqC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;AAGA,SAAO,CAACd,UAAU,CAACmB,MAAZ,gBACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADK,gBAIL;AAAA,2BACE,QAAC,eAAD,CACQ;AADR;AAEQ,MAAA,KAAK,EAAER,YAAY,EAF3B;AAGQ,MAAA,OAAO,EAAET,eAHjB;AAIQ,MAAA,SAAS,EAAC,QAJlB;AAKQ,MAAA,cAAc,EAAEM,QALxB;AAMQ,MAAA,SAAS,EAAET,OANnB;AAOQ,MAAA,UAAU,EAAEA;AAPpB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UAJF;AAgBC,CA5ED;;GAAMD,c;;KAAAA,c;;AA8EN,MAAMsB,eAAe,GAAIC,KAAD,IAAW;AACjC,SAAO;AACLrB,IAAAA,UAAU,EAAEqB,KAAK,CAACrB,UAAN,CAAiBA,UADxB;AAELD,IAAAA,OAAO,EAAEsB,KAAK,CAACrB,UAAN,CAAiBD,OAFrB;AAGLE,IAAAA,MAAM,EAAEoB,KAAK,CAACpB;AAHT,GAAP;AAKD,CAND;;AAQA,MAAMqB,kBAAkB,GAAIC,QAAD,IAAc;AACvC,SAAO;AACL/B,IAAAA,mBAAmB,EAAE,MAAM+B,QAAQ,CAAC/B,mBAAmB,EAApB,CAD9B;AAELC,IAAAA,yBAAyB,EAAGoB,QAAD,IAAcU,QAAQ,CAAC9B,yBAAyB,CAACoB,QAAD,CAA1B;AAF5C,GAAP;AAID,CALD;;AAMA,eAAetB,OAAO,CAAC6B,eAAD,EAAkBE,kBAAlB,CAAP,CAA8CxB,cAA9C,CAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchUserCategories, createTransactionCategory } from '../actions';\nimport CreatableSelect from 'react-select/creatable';\nimport { Button, Select } from 'antd';\n\nconst { Option } = Select;\n\nconst SelectOrCreate = ({loading, fetchUserCategories, createTransactionCategory, categories, select }) => {\n\n  // const [value, setValue] = useState(\"\")\n\n  useEffect(() => {\n    fetchUserCategories()\n  }, []) \n\n\n  let selectorOptions = categories.map( c => {\n    return {\n      label:c.name,\n      value:c.name\n    }\n  })\n\n\n  const onCreate = (value) => {\n    console.log('create ', value)\n    if (value != \"\") {\n      console.log('create')\n      createTransactionCategory(value)\n    }\n}\n\nconst defaultValue = () => {\n  console.log(select && select.transaction_details.category.trim() )\n  console.log( selectorOptions)\n  const found = selectorOptions.filter( o => o.value.trim() === select && select.transaction_details.category.trim())\n  console.log(' default ', found)\n  // console.log(' default ', selectorOptions[1].value)\n  // if(select.transaction_details.category.trim() == selectorOptions[1].value.trim()){\n  //   console.log('true true')\n  // }\n  return selectorOptions.find( o => o.value.trim() === select && select.transaction_details.category.trim())\n}\n\n// const onSubmitTag = (value) => {\n//   setValue(value.value)\n//   console.log('VALUE VALUE ', value)\n//   // fetch(`https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/transactions/${selectedItem.transaction_details.uuid}`, {\n//   //   method: 'PUT',\n//   //   headers: {\n//   //     'Accept': 'application/json',\n//   //     'Content-Type': 'application/json'\n//   //   },\n//   //   body:JSON.stringify({\"category\":value})\n//   // })\n//   // .then(response => response.json())\n//   // .then(data => { \n//   //   reload() \n//   //   closeModal()\n//   //   setValue('')\n//   //   // setVisible(false)\n//   //   // reloadModal(value);\n    \n//   // });\n// }\n\n\nreturn !categories.length \n? <h2>Loading</h2>\n:\n\n  <div>\n    <CreatableSelect\n            // onChange={onSubmitTag}\n            value={defaultValue()}\n            options={selectorOptions}\n            className=\"select\"\n            onCreateOption={onCreate}\n            isLoading={loading}\n            isDisabled={loading}\n          />\n  </div>\n\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    categories: state.categories.categories,\n    loading: state.categories.loading,\n    select: state.select\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    fetchUserCategories: () => dispatch(fetchUserCategories()),\n    createTransactionCategory: (category) => dispatch(createTransactionCategory(category)),\n  }\n}\nexport default connect(mapStateToProps, mapDispatchToProps) (SelectOrCreate);"]},"metadata":{},"sourceType":"module"}