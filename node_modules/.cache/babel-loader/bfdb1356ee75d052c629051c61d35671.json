{"ast":null,"code":"import React,{useState,useEffect}from'react';import{connect}from'react-redux';import{fetchUserCategories as _fetchUserCategories,createTransactionCategory as _createTransactionCategory,editTransactionCategory as _editTransactionCategory,setSelectValue as _setSelectValue}from'../actions';import CreatableSelect from'react-select/creatable';import{Button,Select}from'antd';import{jsx as _jsx}from\"react/jsx-runtime\";var Option=Select.Option;var SelectOrCreate=function SelectOrCreate(_ref){var loading=_ref.loading,fetchUserCategories=_ref.fetchUserCategories,createTransactionCategory=_ref.createTransactionCategory,editTransactionCategory=_ref.editTransactionCategory,categories=_ref.categories,setSelectValue=_ref.setSelectValue,value=_ref.value,select=_ref.select;useEffect(function(){fetchUserCategories();},[value]);var selectorOptions=categories.map(function(c){return{label:c.name,value:c.name};});var onCreate=function onCreate(value){console.log('create ',value);if(value!=\"\"){console.log('create');createTransactionCategory(value);}};function search(nameKey,myArray){for(var i=0;i<myArray.length;i++){if(myArray[i].value.trim()===nameKey.trim()){return myArray[i];}}}var defaultValue=function defaultValue(){if(select&&select.transaction_details.category){return search(select&&select.transaction_details.category,selectorOptions.length>0&&selectorOptions);}return value;};var onSubmitTag=function onSubmitTag(value){console.log('value value ',value);setSelectValue(value);editTransactionCategory(value.value);};return!categories.length?/*#__PURE__*/_jsx(\"h2\",{children:\"Loading\"}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CreatableSelect,{onChange:onSubmitTag,value:defaultValue(),options:selectorOptions,className:\"select\",onCreateOption:onCreate,isLoading:loading,isDisabled:loading})});};var mapStateToProps=function mapStateToProps(state){return{categories:state.categories.categories,loading:state.categories.loading,select:state.select,value:state.categories.value};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{fetchUserCategories:function fetchUserCategories(){return dispatch(_fetchUserCategories());},createTransactionCategory:function createTransactionCategory(category){return dispatch(_createTransactionCategory(category));},editTransactionCategory:function editTransactionCategory(category){return dispatch(_editTransactionCategory(category));},setSelectValue:function setSelectValue(value){return dispatch(_setSelectValue(value));}};};export default connect(mapStateToProps,mapDispatchToProps)(SelectOrCreate);","map":{"version":3,"sources":["/Users/mickaelzana/Desktop/backstage/cards/demo-front/src/components/SelectOrCreate.js"],"names":["React","useState","useEffect","connect","fetchUserCategories","createTransactionCategory","editTransactionCategory","setSelectValue","CreatableSelect","Button","Select","Option","SelectOrCreate","loading","categories","value","select","selectorOptions","map","c","label","name","onCreate","console","log","search","nameKey","myArray","i","length","trim","defaultValue","transaction_details","category","onSubmitTag","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchUserCategories, createTransactionCategory, editTransactionCategory, setSelectValue} from '../actions';\nimport CreatableSelect from 'react-select/creatable';\nimport { Button, Select } from 'antd';\n\nconst { Option } = Select;\n\nconst SelectOrCreate = ({loading, \n  fetchUserCategories, \n  createTransactionCategory, \n  editTransactionCategory,\n  categories,\n  setSelectValue,\n  value, \n  select }) => {\n\n  \n\n  useEffect(() => {\n    fetchUserCategories()\n  }, [value]) \n\n\n  let selectorOptions = categories.map( c => {\n    return {\n      label:c.name,\n      value:c.name\n    }\n  })\n\n\n  const onCreate = (value) => {\n    console.log('create ', value)\n    if (value != \"\") {\n      console.log('create')\n      createTransactionCategory(value)\n    }\n}\nfunction search(nameKey, myArray){\n  for (var i=0; i < myArray.length; i++) {\n      if (myArray[i].value.trim() === nameKey.trim()) {\n          return myArray[i];\n      }\n  }\n}\nconst defaultValue = () => {\n  if(select && select.transaction_details.category){\n    return search(select && select.transaction_details.category, selectorOptions.length > 0 && selectorOptions)\n  }\n  return value\n}\n\nconst onSubmitTag = (value) => {\n  console.log('value value ', value)\n  setSelectValue(value)\n  editTransactionCategory(value.value)\n}\n\n\nreturn !categories.length \n? <h2>Loading</h2>\n:\n\n  <div>\n    <CreatableSelect\n            onChange={onSubmitTag}\n            value={defaultValue()}\n            options={selectorOptions}\n            className=\"select\"\n            onCreateOption={onCreate}\n            isLoading={loading}\n            isDisabled={loading}\n          />\n  </div>\n\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    categories: state.categories.categories,\n    loading: state.categories.loading,\n    select: state.select,\n    value: state.categories.value\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    fetchUserCategories: () => dispatch(fetchUserCategories()),\n    createTransactionCategory: (category) => dispatch(createTransactionCategory(category)),\n    editTransactionCategory: (category) => dispatch(editTransactionCategory(category)),\n    setSelectValue: (value) => dispatch(setSelectValue(value))\n  }\n}\nexport default connect(mapStateToProps, mapDispatchToProps) (SelectOrCreate);"]},"metadata":{},"sourceType":"module"}