{"ast":null,"code":"var _jsxFileName = \"/Users/mickaelzana/Desktop/backstage/cards/demo-front/src/components/SelectOrCreate.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchUserCategories, createTransactionCategory, editTransactionCategory, setSelectValue } from '../actions';\nimport CreatableSelect from 'react-select/creatable';\nimport { Button, Select } from 'antd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Option\n} = Select;\n\nconst SelectOrCreate = ({\n  loading,\n  fetchUserCategories,\n  createTransactionCategory,\n  editTransactionCategory,\n  categories,\n  setSelectValue,\n  value,\n  select\n}) => {\n  _s();\n\n  useEffect(() => {\n    fetchUserCategories();\n  }, []);\n  let selectorOptions = categories.map(c => {\n    return {\n      label: c.name,\n      value: c.name\n    };\n  });\n\n  const onCreate = value => {\n    console.log('create ', value);\n\n    if (value != \"\") {\n      console.log('create');\n      createTransactionCategory(value);\n    }\n  };\n\n  function search(nameKey, myArray) {\n    for (var i = 0; i < myArray.length; i++) {\n      if (myArray[i].value.trim() === nameKey.trim()) {\n        return myArray[i];\n      }\n    }\n  }\n\n  const defaultValue = () => {\n    return search(value && value.transaction_details.category, selectorOptions.length > 0 && selectorOptions);\n  };\n\n  const onSubmitTag = value => {\n    setSelectValue(value);\n    editTransactionCategory(value.value);\n  };\n\n  return !categories.length ? /*#__PURE__*/_jsxDEV(\"h2\", {\n    children: \"Loading\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 3\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(CreatableSelect, {\n      onChange: onSubmitTag,\n      value: defaultValue(),\n      options: selectorOptions,\n      className: \"select\",\n      onCreateOption: onCreate,\n      isLoading: loading,\n      isDisabled: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 3\n  }, this);\n};\n\n_s(SelectOrCreate, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = SelectOrCreate;\n\nconst mapStateToProps = state => {\n  return {\n    categories: state.categories.categories,\n    loading: state.categories.loading,\n    select: state.select,\n    value: state.categories.value\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchUserCategories: () => dispatch(fetchUserCategories()),\n    createTransactionCategory: category => dispatch(createTransactionCategory(category)),\n    editTransactionCategory: category => dispatch(editTransactionCategory(category)),\n    setSelectValue: value => dispatch(setSelectValue(value))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectOrCreate);\n\nvar _c;\n\n$RefreshReg$(_c, \"SelectOrCreate\");","map":{"version":3,"sources":["/Users/mickaelzana/Desktop/backstage/cards/demo-front/src/components/SelectOrCreate.js"],"names":["React","useState","useEffect","connect","fetchUserCategories","createTransactionCategory","editTransactionCategory","setSelectValue","CreatableSelect","Button","Select","Option","SelectOrCreate","loading","categories","value","select","selectorOptions","map","c","label","name","onCreate","console","log","search","nameKey","myArray","i","length","trim","defaultValue","transaction_details","category","onSubmitTag","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchUserCategories, createTransactionCategory, editTransactionCategory, setSelectValue} from '../actions';\nimport CreatableSelect from 'react-select/creatable';\nimport { Button, Select } from 'antd';\n\nconst { Option } = Select;\n\nconst SelectOrCreate = ({loading, \n  fetchUserCategories, \n  createTransactionCategory, \n  editTransactionCategory,\n  categories,\n  setSelectValue,\n  value, \n  select }) => {\n\n  \n\n  useEffect(() => {\n    fetchUserCategories()\n  }, []) \n\n\n  let selectorOptions = categories.map( c => {\n    return {\n      label:c.name,\n      value:c.name\n    }\n  })\n\n\n  const onCreate = (value) => {\n    console.log('create ', value)\n    if (value != \"\") {\n      console.log('create')\n      createTransactionCategory(value)\n    }\n}\nfunction search(nameKey, myArray){\n  for (var i=0; i < myArray.length; i++) {\n      if (myArray[i].value.trim() === nameKey.trim()) {\n          return myArray[i];\n      }\n  }\n}\nconst defaultValue = () => {\n  return search(value && value.transaction_details.category, selectorOptions.length > 0 && selectorOptions)\n}\n\nconst onSubmitTag = (value) => {\n  setSelectValue(value)\n  editTransactionCategory(value.value)\n}\n\n\nreturn !categories.length \n? <h2>Loading</h2>\n:\n\n  <div>\n    <CreatableSelect\n            onChange={onSubmitTag}\n            value={defaultValue()}\n            options={selectorOptions}\n            className=\"select\"\n            onCreateOption={onCreate}\n            isLoading={loading}\n            isDisabled={loading}\n          />\n  </div>\n\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    categories: state.categories.categories,\n    loading: state.categories.loading,\n    select: state.select,\n    value: state.categories.value\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    fetchUserCategories: () => dispatch(fetchUserCategories()),\n    createTransactionCategory: (category) => dispatch(createTransactionCategory(category)),\n    editTransactionCategory: (category) => dispatch(editTransactionCategory(category)),\n    setSelectValue: (value) => dispatch(setSelectValue(value))\n  }\n}\nexport default connect(mapStateToProps, mapDispatchToProps) (SelectOrCreate);"]},"metadata":{},"sourceType":"module"}